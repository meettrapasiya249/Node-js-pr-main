<%- include('../header') %>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
    :root { --primary: #667eea; --secondary: #764ba2; --bg-light: #f8f9fa; }
    .page-breadcrumb { background: #ffffff; padding: 1.5rem 2rem; border-bottom: 1px solid #edf2f7; }
    .container-fluid { padding: 30px; background-color: var(--bg-light); min-height: calc(100vh - 150px); }
    .custom-card { border: none; border-radius: 12px; background: #ffffff; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); overflow: hidden; }
    .table tbody tr:hover { background-color: #f7fafc !important; box-shadow: inset 4px 0 0 var(--primary); }
    .admin-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
    .action-btns { display: flex; gap: 10px; justify-content: center; }
    .btn-icon { width: 35px; height: 35px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; transition: 0.3s; }
    .btn-edit { background-color: #ebf4ff; color: #3182ce; }
    .btn-delete { background-color: #fff5f5; color: #e53e3e; }
    .add-new-btn { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white !important; padding: 10px 20px; border-radius: 8px; font-weight: 600; }
    .filter-section { background: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
</style>

<div class="page-breadcrumb">
    <div class="row align-items-center">
        <div class="col-6">
            <h4 class="page-title">Admin Management</h4>
        </div>
        <div class="col-6 text-right">
            <a href="/admin/add-admin" class="add-new-btn text-white">
                <i class="fas fa-plus-circle mr-1"></i> Add New Admin
            </a>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="filter-section">
        <form action="/admin/view-admin" method="GET" class="row align-items-end">
            <div class="col-md-5">
                <label class="small font-weight-bold">Search</label>
                <input type="text" name="search" class="form-control" placeholder="Search by Name or Email..." value="<%= search %>">
            </div>
            <div class="col-md-3">
                <label class="small font-weight-bold">Gender</label>
                <select name="gender" class="form-control">
                    <option value="">All Genders</option>
                    <option value="Male" <%= gender === 'Male' ? 'selected' : '' %>>Male</option>
                    <option value="Female" <%= gender === 'Female' ? 'selected' : '' %>>Female</option>
                </select>
            </div>
            <div class="col-md-4">
                <button type="submit" class="btn btn-primary shadow-sm">Apply Filter</button>
                <a href="/admin/view-admin" class="btn btn-light border ml-2">Reset</a>
            </div>
        </form>
    </div>

    <div class="custom-card">
        <% if (admins && admins.length > 0) { %>
            <div class="table-responsive">
                <table class="table mb-0">
                    <thead class="bg-light">
                        <tr>
                            <th>#</th>
                            <th>Profile</th>
                            <th>Name</th>
                            <th>Email & Mobile</th>
                            <th>Gender</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% admins.forEach((admin, index) => { %>
                            <tr>
                                <td><%= index + 1 %></td>
                                <td>
                                    <% if (admin.profileImg) { %>
                                        <img src="/uploads/<%= admin.profileImg %>" class="admin-avatar">
                                    <% } else { %>
                                        <i class="fas fa-user-circle fa-2x text-muted"></i>
                                    <% } %>
                                </td>
                                <td class="font-weight-bold"><%= admin.adminName %></td>
                                <td>
                                    <div><%= admin.email %></div>
                                    <small class="text-muted"><%= admin.mobile %></small>
                                </td>
                                <td><span class="badge badge-pill badge-light p-2"><%= admin.gender %></span></td>
                                <td>
                                    <div class="action-btns">
                                        <a href="/admin/edit-profile/<%= admin._id %>" class="btn-icon btn-edit" title="Edit">
                                            <i class="fas fa-pen-to-square"></i>
                                        </a>
                                        <a href="/admin/delete-admin/<%= admin._id %>" 
                                           class="btn-icon btn-delete" 
                                           onclick="return confirm('Are you sure?')">
                                            <i class="fas fa-trash-can"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <div class="text-center p-5">
                <i class="fas fa-search-minus fa-3x text-muted mb-3"></i>
                <p class="text-muted">No admins found matching your criteria.</p>
                <a href="/admin/view-admin" class="btn btn-sm btn-outline-primary">Show All Admins</a>
            </div>
        <% } %>
    </div>
</div>

<%- include('../footer') %>